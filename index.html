<!DOCTYPE html>
<html>
  <head>
    <title>Leafy</title>
    <link rel="stylesheet" href="leaflet/leaflet.css">
    <!--[if IE]>
    <link rel="stylesheet" href="leaflet/leaflet.ie.css">
    <![endif]-->
    <link rel="stylesheet" href="css/main.css">
    <meta charset="utf-8">
  </head>
  <body>
    <div id="sidebar">
      <div id="routes"></div>
      <div id="itinerary"></div>
      <div id="sms"></div>
      <div id="track"></div>
    </div>
    <div id="map"></div>

    <script type="ractive" id="routerTemplate">
      {{#targets}}
      <div>
        <input type="text" id="from" placeholder="From">
        <button proxy-tap="swap">swap</button>
      </div>
      <div>
        <input type="text" id="to" placeholder="To">
      </div>
      <div>
        <label for="mode">Mode:</label>
        <select id="mode" name="{{mode}}">
          <option value="TRANSIT,WALK">Transit</option>
          <option value="WALK">Walk Only</option>
          <option value="BICYCLE">Bike Only</option>
        </select>
      </div>
      {{/targets}}
      <hr>
      <h3>Routes:</h3>
      <ul>
      {{#results:num}}
        <li
            class="{{(num == selected ? 'selected' : '')}}"
            proxy-tap="select:{{num}}"
            proxy-hover="hover:{{num}}">
          #{{(num+1)}} - {{(f(duration))}}
        </li>
      {{/results}}
      {{^results}}
        <li>No results</li>
      {{/results}}
      </ul>
    </script>

    <script type="ractive" id="itineraryTemplate">
      <h3>Steps:</h3>
      {{#current}}
      <ol>
      {{#legs:i}}
      <li>
        {{^(isTransit(mode))}}
          <span proxy-tap="showSteps" proxy-hover="hover:{{i}}">
            <b>{{mode}}</b> {{from.name}} to {{to.name}} ({{(f(duration))}})
          </span>
          {{#.showSteps}}
          <ul>
            {{#steps}}
              <li><b>{{( formatDirection(relativeDirection) )}}</b> on to {{streetName}}</li>
            {{/steps}}
          </ul>
          {{/.showSteps}}
        {{/()}}

        {{#(isTransit(mode))}}
          <span proxy-tap="showSteps" proxy-hover="hover:{{i}}">
            <b>{{mode}}</b> {{route}} ({{(f(duration))}}{{#fare}} - P{{fare}}{{/fare}})
          </span>
          {{#.showSteps}}
          <ul>
            <li><b>board</b> {{from.name}}</li>
            <li><b>alight</b> {{to.name}}</li>
          </ul>
          {{/.showSteps}}
        {{/()}}
      </li>
      {{/legs}}
      </ol>
      {{/current}}
    </script>

    <script type="ractive" id="popupTemplate">
      <p>{{address}}</p>
      <button proxy-tap="setStart">Set as starting point</button>
      <button proxy-tap="setEnd">Set as destination</button>
      <p>{{latlng.lat}},{{latlng.lng}}</p>
    </script>

    <script type="ractive" id="modalTemplate">
      <input type="text" value="{{number}}" placeholder="Number">
      {{^sending}}
      <button proxy-tap="send">Send</button>
      {{/sending}}
      {{#sending}}
      Sending...
      {{/sending}}
    </script>

    <script type="ractive" id="smsWidgetTemplate">
      <button proxy-tap="send">Send current directions to me</button>
    </script>

    <script src="js/reqwest.min.js"></script>
    <script src="js/q.min.js"></script>
    <script src="js/Ractive.min.js"></script>
    <script src="js/picoModal-1.0.0.min.js"></script>
    <script src="http://maps.google.com/maps/api/js?libraries=places&sensor=false&key=AIzaSyBLP-naDBEFyAjrnvuzq-EWKAOC_MhN3Bc"></script>
    <script src="leaflet/leaflet.js"></script>
    <script src="leaflet/google.js"></script>
    <script src="js/util.js"></script>
    <script src="js/fare.js"></script>
    <script src="js/ws.js"></script>
    <script src="js/map.js"></script>
  </body>
</html>
