<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=980">
    <title>Sakay.ph — Commute directions for jeepneys, buses, and trains</title>
    <link rel="stylesheet" href="leaflet/leaflet.css">
    <!--[if IE]>
    <link rel="stylesheet" href="leaflet/leaflet.ie.css">
    <![endif]-->
    <link rel="stylesheet" href="stylesheets/screen.css">
    <link rel="stylesheet" href="stylesheets/font-awesome.css">
  </head>
  <body>
    <header>
      <h1 onclick="viewMode('toggle');">sakay.ph</h1>
      <h2>
        <p>Commuting is hard. It doesn't have to be.</p>
        <p>Get <strong>jeepney</strong>, <strong>bus</strong>, and <strong>train</strong> directions in Metro Manila.</p>
      </h2>
      <figure id="vroom">
        <img id="jeep" alt="Jeep!" src="img/jeep.svg">
        <img id="bus" alt="Bus!" src="img/bus.svg">
        <img id="train" alt="Train!" src="img/train.svg">      
      </figure>
      <figure id="ground">
        <!-- I am a non-semantic element. nice to meet you! -->
      </figure>
    </header>
    <section id="search-container">
      <div id="search" class="landinginfo">
      </div>
    </section>
      <section id="do-things">
        <div class="container">
          <div id="sms-info" class="landinginfo">
            <h3>Go mobile with SMS</h3>
            <h4>Get directions on your mobile phone.</h4>
            <img class="iphone" src="img/iphone.svg" alt="This is an iPhone, but it works fabulously with normal phones too!">
            <p>Send to <strong>0999 802 5648</strong>:</p>
            <p>ROUTE <strong>origin</strong> TO <strong>destination</strong></p>
            <!-- <em>TODO: finish the rest of this. Animated examples</em> -->
          </div>         
        </div>
      </section>
    <div id="map-container">
      <div id="map">
      </div>      
    </div>
    <div id="sidebar">
      <div id="progress"></div>
      <div id="routes"></div>
      <div id="itinerary"></div>
      <div id="sms"></div>
      <div id="track"></div>
    </div>
    <div id="home">
      <section id="analytics">
        <div class="container">
          <h3>Search statistics</h3>
          <p><strong>COMING SOON</strong> — Commonly searched routes, time-of-day graphs, and route visualizations.</p>
          <br>
          <p>We’re still collecting data. Why don‘t you try using the service? ;)</p>
        </div>
      </section>
      <section id="faq">
        <div class="container">          
          <h3>Frequently Asked Questions</h3>

          <div class="columns">

            <h4>So what's all this, then?</h4>

            <p>Sakay.ph is a webapp that aims to help people use jeepneys, buses, and trains in Metro Manila. It's like Google Maps, but for commuting!

            <p>It was built as an entry to the <a href="philippine-transit.hackathome.com">Philippine Transit App Challenge</a>, and is open-sourced under the MIT license. (source coming soon!)

            <h4>How are you maintaining this / making money?</h4>

            <p>We're providing this service freely for the foreseeable future. We built it partly for the challenge, but mostly because it's something we'd personally love to have.

            <p>That said, if you'd like to help out, you're free to donate! We'd appreciate it. (Links coming soon)

            <h4>Your directions are wrong!
            </h4>
            <p>Sorry about that — the data is graciously provided by the DOST, ASTI, etc., and is out of our control. You're welcome to help out, though. Why not check out their forum?

            <h4>The SMS search gives me weird, far-away results.</h4>

            <p>Unfortunately, there are limitations when using SMS, like no auto-complete. Try to be as specific as you can. For example, search for either "La Salle Greenhills" or "La Salle Taft" instead of just "La Salle".

            <h4>Who made this [wonderful godsend] / [giant pile of crap]?
            </h4>
            <p>Sakay.ph was built by <a href="http://pleasantprogrammer.com">Thomas Dy</a>, and designed by <a href="http://twitter.com/_phi">Philip Cheang</a>. We do awesome stuff at <a href="http://byimplication.com">By Implication</a>, which you should totes check out. (some of our projects — <a href="http://storylark.ph">storylark.ph</a> and <a href="http://sari.ph">sari.ph</a>)

            <p>We use OpenTripPlanner and OpenStreetMap for routing, and Google Places API for geocoding. The front-end is built with Compass, Ractive, and Leaflet.

            <p>There're also a <a href="http://pleasantprogrammer.com/posts/jeep-and-bus-schedules.html">number of customizations</a> we've made to the <a href="http://pleasantprogrammer.com/posts/highways-in-otp.html">OSM data</a> and <a href="http://pleasantprogrammer.com/posts/open-trip-planner.html">OTP code</a> to accommodate the Philippine transit system's <a href="http://pleasantprogrammer.com/posts/fare-data.html">weirdness</a>.

            <h4>I'd like to learn more about how you built this.
            </h4>
            <p>You should drop by Thomas' <a href="http://pleasantprogrammer.com/categories/philippine-transit-app.html">blog</a>. I hear he's a very <a href="http://pleasantprogrammer.com">pleasant programmer</a>.

            <h4>Privacy disclaimer:
            </h4>
            <p>We collect searches (origin + destination) and timestamps. This is to improve the service, and hopefully to also help the transit agencies understand how people travel. (better trains?)

            <p>We *don't* collect any personally identifiable information like IP addresses, your location, fingerprints, or favorite spice girl, 'cause that'd be evil and creepy.

            <p>If you're a paranoid android, you can opt out here. Don't believe us? Hit us on Github. (coming soon)

            </div>

        </div>          
        
      </section>
    </div>

    <script type="ractive" id="searchTemplate">
      <h3>Find a route now</h3>
      <h4>Enter your starting point, and your destination.</h4>
      <div>
        <input type="text" id="from" placeholder="Starting Point">
        <input type="text" id="to" placeholder="Destination">
        <button id="swap" proxy-tap="swap"><img src="img/swap.svg" alt="Swap Origin and Destination">
        </button>
        <button id="get-route">Get Route</button>
        <p class="view-toggle" onclick="viewMode('map');">
          Visual thinker? You can <br>
          <strong>go directly to the map.</strong>
        </p>
      </div>
      <div class="fix-later">
        <label for="mode">Mode:</label>
        <select id="mode" name="{{mode}}">
          <option value="TRANSIT,WALK">Transit</option>
          <option value="WALK">Walk Only</option>
          <option value="BICYCLE">Bike Only</option>
        </select>
      </div>
    </script>

    <script type="ractive" id="routerTemplate">
      <h3>routes</h3>
      <ul class="icons-ul">
      {{#results:num}}
        <li
            class="{{(num == selected ? 'selected' : '')}}"
            proxy-tap="select:{{num}}"
            proxy-hover="hover:{{num}}"><i class="icon-li {{(num == selected ? 'icon-check-sign' : 'icon-check-empty')}}"></i>
          {{#legs}}
            {{#(mode == 'RAIL')}}
              <span class="badge badge-{{(route)}}">{{route}}</span>
            {{/()}}
            {{^(mode == 'RAIL')}}
              <span class="badge badge-{{(mode)}}">{{mode}}</span>
            {{/()}}
          {{/legs}}
          <br>
          <span class="info">
           {{(f(duration))}} — (P{{fare}})
          </span>
        </li>
      {{/results}}
      {{^results}}
        <li><i class="icon-li icon-remove"></i>No results</li>
      {{/results}}
      </ul>
    </script>

    <script type="ractive" id="itineraryTemplate">
      <h3>steps</h3>
      {{#current}}
      <ol>
      {{#legs:i}}
      <li>
        {{^(isTransit(mode))}}
          <span proxy-tap="showSteps" proxy-hover="hover:{{i}}">
            <b class="badge">{{mode}}</b> {{from.name}} to {{to.name}} ({{(f(duration))}})
          </span>
          {{#.showSteps}}
          <ul>
            {{#steps}}
              <li><b>{{( formatDirection(relativeDirection) )}}</b> on to {{streetName}}</li>
            {{/steps}}
          </ul>
          {{/.showSteps}}
        {{/()}}

        {{#(isTransit(mode))}}
          <span proxy-tap="showSteps" proxy-hover="hover:{{i}}">
            <b class="badge">{{mode}}</b> {{route}} ({{(f(duration))}}{{#fare}} - P{{fare}}{{/fare}})
          </span>
          {{#.showSteps}}
          <ul>
            <li><b>board</b> {{from.name}}</li>
            <li><b>alight</b> {{to.name}}</li>
          </ul>
          {{/.showSteps}}
        {{/()}}
      </li>
      {{/legs}}
      </ol>
      {{/current}}
    </script>

    <script type="ractive" id="popupTemplate">
      <p>{{address}}</p>
      <button proxy-tap="setStart">Set as starting point</button>
      <button proxy-tap="setEnd">Set as destination</button>
      <p>{{latlng.lat}},{{latlng.lng}}</p>
    </script>

    <script type="ractive" id="modalTemplate">
      <input type="text" value="{{number}}" placeholder="Number">
      {{^sending}}
      <button proxy-tap="send">Send</button>
      {{/sending}}
      {{#sending}}
      Sending...
      {{/sending}}
    </script>

    <script type="ractive" id="smsWidgetTemplate">
      <button proxy-tap="send">Send current directions to me</button>
    </script>

    <script type="ractive" id="progressWidgetTemplate">
      {{#loading}}loading{{/loading}}
    </script>

    <script type="ractive" id="trackWidgetTemplate">
      <input type="checkbox" checked="{{disallowTracking}}"> Opt-out of logging
    </script>

    <script type="text/javascript">
      (function() {
        var config = {
          kitId: 'sek3kre',
          scriptTimeout: 3000
        };
        var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
      })();
    </script>
    <script src="js/reqwest.min.js"></script>
    <script src="js/q.min.js"></script>
    <script src="js/Ractive.min.js"></script>
    <script src="js/picoModal-1.0.0.min.js"></script>
    <script src="http://maps.google.com/maps/api/js?libraries=places&sensor=false&key=AIzaSyBLP-naDBEFyAjrnvuzq-EWKAOC_MhN3Bc"></script>
    <script src="leaflet/leaflet.js"></script>
    <script src="leaflet/google.js"></script>
    <script src="js/util.js"></script>
    <script src="js/fare.js"></script>
    <script src="js/ws.js"></script>
    <script src="js/map.js"></script>
  </body>
</html>
